<?xml version="1.0" encoding="UTF-8" ?>
<Module>
  <ModulePrefs title="Page Rating" height="250" scaling="false" />
  <UserPref name="gaAccount" display_name="Google Analytics Account" required="true" default_value="UA-28509839-1" />
  <UserPref name="rankTitle" display_name="Rank Title" required="true" default_value="UA-28509839-1" />
  <Content type="html">
  <![CDATA[ 
    <script type="text/javascript">
    
      var prefs = new gadgets.Prefs();

	  var _gaq = _gaq || [];
	  _gaq.push(['_setAccount', prefs.getString("gaAccount")]);
	  _gaq.push(['_trackPageview']);
	
	  (function() {
	    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
	    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
	    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	  })();	
	  
	</script>
	
	<style>
		li.star {display:block; float:left; width:18px; height:22px; background:url('https://rating-gadget.googlecode.com/svn/trunk/WebContent/images/greystar.gif') no-repeat top left;}
		.highlight {background:url('https://rating-gadget.googlecode.com/svn/trunk/WebContent/images/goldstar.gif') no-repeat top left;}
	</style>

	<div id="fbContent">
	<h3>Was this useful?</h3>
	<form action="#" name="form">
		<input type="radio" name="answer" id="yes" value="Yes"><label for="yes" id="lyes">Yes</label>
		<input type="radio" name="answer" id="no" value="No"><label for="no" id="lno">No</label>
	</form>
	
	<ul id="starbay">
		<li onClick="ratePage(1)" class="star" id="star1"></li>
		<li onClick="ratePage(2)" class="star" id="star2"></li>
		<li onClick="ratePage(3)" class="star" id="star3"></li>
		<li onClick="ratePage(4)" class="star" id="star4"></li>
		<li onClick="ratePage(5)" class="star" id="star5"></li>
	</ul>
	<div id="fbThanks"><p>&nbsp;</p></div>
	<a href="#" onClick="_gaq.push(['_trackEvent', 'Ranking Gadget', 'Rating', prefs.getString("rankTitle"), value]);">ClickMe</a>
</div>

	<script>	  
	  function ratePage(value){
	  		var starList = document.getElementsByClassName("star");
	  
			  for (var i=0; i<starList.length; i++)
			  {   
			  	i<=value-1?starList[i].className="star highlight":starList[i].className="star";
			  }
	  		_gaq.push(['_trackEvent', 'Ranking Gadget', 'Rating', prefs.getString("rankTitle"), value]);
	  		console.log(value);	  		
	  	}
	  </script>
  ]]> 
  </Content>
</Module>