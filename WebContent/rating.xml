<?xml version="1.0" encoding="UTF-8" ?>
<Module>
  <ModulePrefs title="Page Rating" height="250" scaling="false" />
  <UserPref name="gaAccount" display_name="Google Analytics Account" required="true" default_value="UA-28509839-1" />
  <UserPref name="rankTitle" display_name="Rank Title" required="true" default_value="UA-28509839-1" />
  <Content type="html">
  <![CDATA[ 
    <script type="text/javascript">
    
      var prefs = new gadgets.Prefs();

	  var _gaq = _gaq || [];
	  _gaq.push(['_setAccount', prefs.getString("gaAccount")]);
	  _gaq.push(['_trackPageview']);
	
	  (function() {
	    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
	    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
	    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	  })();	
	  
	</script>

	<div id="fbContent">
	<h3>Was this useful?</h3>
	<form action="#" name="form">
		<input type="radio" name="answer" id="yes" value="Yes"><label for="yes" id="lyes">Yes</label>
		<input type="radio" name="answer" id="no" value="No"><label for="no" id="lno">No</label>
	</form>
	
	<div id="starbay">
		<img class="star" id="star1" src="./images/greystar.gif" />
		<img class="star" id="star2" src="./images/greystar.gif" />
		<img class="star" id="star3" src="./images/greystar.gif" />
		<img class="star" id="star4" src="./images/greystar.gif" />
		<img class="star" id="star5" src="./images/greystar.gif" />
	</div>
	<div id="fbThanks"><p>&nbsp;</p></div>
	<a href="#" onClick="_gaq.push(['_trackEvent', 'Ranking Gadget', 'Rating', prefs.getString("rankTitle"), value]);">ClickMe</a>
</div>

	<script>
	var starList = document.getElementsByClassName("star");
	  
	  for (var i=0; i<starList.length; i++)
	  {   
	  	var star = starList.item(i);
	  	console.log(star);
	  	star.onClick=function(){
	  		var value = this.id[4];
	  		_gaq.push(['_trackEvent', 'Ranking Gadget', 'Rating', prefs.getString("rankTitle"), value]);
	  		console.log(value);	  		
	  	}
	  }
	  </script>
  ]]> 
  </Content>
</Module>